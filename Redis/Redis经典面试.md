#### Redis经典题目

##### Redis介绍

​	redis 有10w ops即 operation per second

##### Redis数据淘汰策略

- noeviction:返回错误当内存限制达到
- allKeys-lru:尝试回收最少使用的键，使得新添加的数据有空间存放
- volatile-lru:尝试回收最少使用的键，但仅限于在过期集合的键
- allKeys-random:回收随机的键
- volatile-random:仅限于过期集合的键

##### Mysql里有2000w数据，redis中只可以存20w数据，如何保证redis中的数据是热点数据？

​		redis内存数据集大小上升到一定大小的时候，就会施行数据淘汰策略，通过数据淘汰，可以保证留下来的数据都是热点数据。比如使用lru策略。

##### 说说Redis哈希槽的概念

​		Redis集群没有使用一致性hash，而是引入哈希槽的概念，Redis集群有16384个哈希槽，每个key通过CRC16校验后对16384取模来决定放置哪个槽，集群的每个节点负责一部分hash槽。

##### Redis的管道有什么用？ pipeline

​		一次请求响应服务器实现处理新的请求，即使旧的请求还未被响应，这样就可以将多个命令发送到服务器，而不用等待回复，最后在一个步骤中读取该答复。

##### Redis的事务和相关命令

​		事务是一个单独的隔离操作，事务中的所有命令都会序列化，按顺序执行，事务在执行的过程中，不会被其他客户端发送来的命令请求所打断，事务是一个原子操作。

​		命令相关，mutil开启事务，exec执行，discard回滚事务，watch监视一个事务。

##### Redis如何做内存优化？

​		尽可能使用散列表，散列表使用的内存非常小，所以你应该尽可能的 将你的数据模型抽象到一个散列表里面，比如你的web系统中有一个用户对象，不要为这个用户的名称，姓氏，邮箱设置单独的key，而是应该把这个用户的所有信息存储到一张散列表中。

##### Redis实现分布式锁？

​		使用setnx来争抢锁，抢到之后，再使用expire给锁加一个过期时间防止锁忘记释放

​		如果setnex执行expire之前进程意外crash或者重启维护了

​		set指令 有非常复杂的参数，这个可以同时把setnx和expi合成一套指令来用





