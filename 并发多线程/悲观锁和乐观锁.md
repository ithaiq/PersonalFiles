### 乐观锁和悲观锁

#### 悲观锁

​	就是很悲观，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据的时候，就会阻塞知道它拿到锁。

​	Java 中 Synchronized就属于悲观锁的一种实现，每次线程要修改数据都要先获得锁，保证同一时间只有一个线程能操作数据，其他线程则会被阻塞。

#### 乐观锁

​	就是很乐观，每次那数据的时候都认为别人不会修改，所以不会上锁，但是再提交更新的时候回判断一下在此期间别人有没有去更新这个数据，乐观锁适用于都读多写少的应用场景，这样可以提高吞吐量。

##### 乐观锁的实现方式

- 使用数据版本记录机制实现，用过一个version字段标识，当读取诗句的时候，将version字段的值一桶读出，数据每更新一次，对此version+1.当我们提交更新的时候，判断数据库表对应记录的当前版本信息与第一次取出来的version值进行对比，如果取出的当前版本号与第一次取出来的version相等，则更新，否则认为是过期数据
- 使用时间戳实现

Javaz 的JUC中的atomic包就是乐观锁的一种实现，通过CAS操作实现线程安全的自增



#### 乐观锁和悲观锁的区别

​	